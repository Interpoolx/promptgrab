javascript:(function(){if(window.grabAndAskInjected&&window.grabAndAskTimeout&&Date.now()-window.grabAndAskTimeout>120000)window.grabAndAskInjected=false;if(window.grabAndAskInjected)return alert("Inspector already active! Click Cancel to reset.");window.grabAndAskInjected=true;window.grabAndAskTimeout=Date.now();window.elementTasks=[];const t=document.createElement("div");Object.assign(t.style,{position:"fixed",bottom:"20px",right:"20px",background:"#007acc",color:"white",padding:"12px 24px",borderRadius:"8px",fontFamily:"system-ui",zIndex:"99999",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontWeight:"500"});t.textContent="Click elements to add tasks (0/10)";document.body.appendChild(t);let e=null,n=!0;const o=document.createElement("div");o.className="task-panel-ignore";o.style.cssText="position:fixed;bottom:20px;right:20px;width:350px;max-height:500px;background:#1e1e1e;color:#fff;border-radius:8px;box-shadow:0 8px 32px rgba(0,0,0,0.5);font-family:system-ui;z-index:100002;display:none;overflow:hidden;";o.innerHTML='<div style="padding:12px 16px;border-bottom:1px solid #444;display:flex;align-items:center;justify-content:space-between;"><h3 style="margin:0;font-size:14px;font-weight:600;">Task List (<span class="task-count">0</span>/10)</h3><div style="display:flex;gap:6px;"><button class="minimize-btn" title="Minimize" style="background:none;border:none;color:#999;cursor:pointer;font-size:18px;padding:0;width:24px;height:24px;">−</button><button class="close-panel" title="Close" style="background:none;border:none;color:#999;cursor:pointer;font-size:18px;padding:0;width:24px;height:24px;">×</button></div></div><div class="task-list" style="padding:12px;max-height:350px;overflow-y:auto;"></div><div style="padding:12px;border-top:1px solid #444;display:flex;gap:8px;"><button class="send-all-btn" style="flex:1;padding:10px;background:#007acc;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:500;font-size:13px;">Send All</button><button class="clear-all-btn" style="flex:1;padding:10px;background:#444;color:white;border:none;border-radius:4px;cursor:pointer;font-size:13px;">Clear All</button></div>';document.body.appendChild(o);const a=o.querySelector(".task-list"),s=o.querySelector(".task-count"),i=o.querySelector(".send-all-btn"),c=o.querySelector(".clear-all-btn"),l=o.querySelector(".close-panel"),d=o.querySelector(".minimize-btn");let r=false;function u(){const e=window.elementTasks.length;s.textContent=e;t.textContent=e>=10?"Limit reached (10/10) - Time to send!":`Click elements to add tasks (${e}/10)`;t.style.background=e>=10?"#dc3545":"#007acc"}function m(){a.innerHTML="";window.elementTasks.forEach((e,t)=>{const n=document.createElement("div");n.style.cssText="background:#2d2d2d;padding:8px;border-radius:4px;margin-bottom:6px;border:1px solid #444;display:flex;align-items:center;gap:6px;";n.innerHTML=`<input type="checkbox" ${e.completed?"checked":""} data-idx="${t}" style="cursor:pointer;"><input class="inline-comment" data-idx="${t}" value="${e.request||""}" placeholder="comment…" style="flex:1;background:transparent;border:none;color:#fff;font-size:12px;padding:2px 4px;border-bottom:1px solid #444;outline:none;"><button class="remove-task" data-idx="${t}" style="background:none;border:none;color:#dc3545;cursor:pointer;font-size:14px;">×</button>`;a.appendChild(n)});a.querySelectorAll(".inline-comment").forEach(e=>{e.addEventListener("input",e=>{window.elementTasks[e.target.dataset.idx].request=e.target.value})});a.querySelectorAll(".remove-task").forEach(e=>{e.addEventListener("click",e=>{window.elementTasks.splice(e.target.dataset.idx,1);m();u()})})}function p(){r=!r;o.querySelector(".task-list").style.display=r?"none":"block";o.querySelector(".send-all-btn").parentElement.style.display=r?"none":"flex";d.textContent=r?"+":"−"}d.onclick=p;l.onclick=()=>o.style.display="none";c.onclick=()=>{if(confirm("Clear all tasks?")){window.elementTasks=[];m();u();o.style.display="none"}};i.onclick=()=>{const e="ampcode";(function(e){const t=document.createElement("div");t.style.cssText="position:fixed;bottom:20px;right:20px;background:#007acc;color:white;padding:12px 24px;border-radius:8px;font-family:system-ui;z-index:99999;box-shadow:0 4px 12px rgba(0,0,0,0.2);transition:opacity 0.3s;";t.textContent="Sending to "+e+"...";document.body.appendChild(t);let n=`<!-- URL: ${location.href} -->\n\nTASK LIST:\n==========\n\n`;window.elementTasks.forEach((e,t)=>{n+=`${t+1}. [${e.completed?"✓":"○"}] ${e.request||"No description"}\n`;n+=`   Reference: #element-${t+1}\n\n`});n+="\n\nHTML REFERENCES:\n================\n\n";window.elementTasks.forEach((e,t)=>{n+=`<!-- #element-${t+1} -->\n`;n+=e.html+"\n\n"});fetch("http://localhost:4123/grab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:location.href,html:n,tool:e,tasks:window.elementTasks,taskCount:window.elementTasks.length})}).then(()=>{t.style.opacity="0";setTimeout(()=>{t.remove();const n=document.createElement("div");n.style.cssText="position:fixed;bottom:20px;right:20px;background:#28a745;color:white;padding:12px 24px;border-radius:8px;font-family:system-ui;z-index:99999;box-shadow:0 4px 12px rgba(0,0,0,0.2);";n.textContent="✓ Sent "+window.elementTasks.length+" tasks to "+e;document.body.appendChild(n);setTimeout(()=>n.remove(),2500);window.elementTasks=[];m();u();o.style.display="none"},300)}).catch(e=>{t.style.background="#dc3545";t.textContent="Error: Is VS Code running?";console.error(e);setTimeout(()=>t.remove(),3000)})})(e)};document.addEventListener("mouseover",t=>{if(!n||t.target.closest(".task-panel-ignore"))return;if(e)e.style.outline="";e=t.target;e.style.outline="2px solid #007acc"});document.addEventListener("click",function(t){if(!n||t.target.closest(".task-panel-ignore"))return;t.preventDefault();t.stopPropagation();const o=t.target;if(o.style)o.style.outline="";if(window.elementTasks.length>=10)return alert("Task limit reached (10/10). Please send or clear tasks first.");(function(e){e.style.outline="3px solid #007acc";e.style.boxShadow="0 0 0 3px rgba(0,122,204,0.3)";const t=document.createElement("div");t.className="task-panel-ignore";t.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:100003;";const n=document.createElement("div");n.className="task-panel-ignore";n.style.cssText="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#1e1e1e;color:#fff;padding:24px;border-radius:8px;width:450px;box-shadow:0 8px 32px rgba(0,0,0,0.5);font-family:system-ui;z-index:100004;";const o=e.cloneNode(true);o.querySelectorAll("style, script").forEach(e=>e.remove());const a=o.outerHTML;n.innerHTML=`<h2 style="margin:0 0 16px 0;font-size:16px;font-weight:600;">Add Task</h2><details style="margin-bottom:16px;"><summary style="cursor:pointer;font-size:12px;color:#999;margin-bottom:8px;">Preview Code</summary><pre style="background:#2d2d2d;padding:10px;border-radius:4px;max-height:120px;overflow:auto;margin:8px 0 0 0;font-size:10px;border:1px solid #444;white-space:pre-wrap;word-wrap:break-word;color:#a0a0a0;line-height:1.4;">${a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre></details><label style="display:block;margin-bottom:16px;"><span style="display:block;margin-bottom:6px;font-weight:500;font-size:12px;color:#ccc;">What do you want to change?</span><textarea placeholder="e.g., Make button larger, change color to red, fix alignment..." style="width:100%;padding:8px;background:#2d2d2d;color:#fff;border:1px solid #007acc;border-radius:4px;font-size:12px;font-family:system-ui;resize:vertical;min-height:70px;box-sizing:border-box;" autocomplete="off"></textarea></label><div style="display:flex;gap:8px;"><button class="add-task-btn" style="flex:1;padding:10px;background:#007acc;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:500;font-size:13px;">Add to List</button><button class="cancel-btn" style="flex:1;padding:10px;background:#444;color:white;border:none;border-radius:4px;cursor:pointer;font-size:13px;">Cancel</button></div>`;t.appendChild(n);document.body.appendChild(t);const s=n.querySelector("textarea"),i=n.querySelector(".add-task-btn"),c=n.querySelector(".cancel-btn");const l=()=>{e.style.outline="";e.style.boxShadow="";t.remove()};i.onclick=()=>{const t=s.value.trim();window.elementTasks.push({id:`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,html:a,request:t,completed:false});m();u();o.style.display="block";l()};c.onclick=l;t.onclick=e=>{if(e.target===t)l()};setTimeout(()=>s?.focus(),100)})(o)},true)})();