javascript:(function(){if(window.grabAndAskInjected&&window.grabAndAskTimeout&&Date.now()-window.grabAndAskTimeout>12e4)window.grabAndAskInjected=!1;if(window.grabAndAskInjected)return alert("Inspector already active! Click Cancel to reset.");window.grabAndAskInjected=!0;window.grabAndAskTimeout=Date.now();window.elementTasks=[];const e=document.createElement("div");Object.assign(e.style,{position:"fixed",bottom:"20px",right:"20px",background:"#007acc",color:"white",padding:"12px 24px",borderRadius:"8px",fontFamily:"system-ui",zIndex:"99999",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontWeight:"500"});e.textContent="Click elements to add tasks (0/10)";document.body.appendChild(e);let t=null,n=!0;const o=document.createElement("div");o.className="task-panel-ignore";o.style.cssText="position:fixed;bottom:20px;right:20px;width:300px;max-height:400px;background:#1e1e1e;color:#fff;border-radius:8px;box-shadow:0 8px 32px rgba(0,0,0,0.5);font-family:system-ui;z-index:100002;display:none;overflow:hidden;";o.innerHTML='<div style="padding:10px 12px;border-bottom:1px solid #444;display:flex;align-items:center;justify-content:space-between;"><h3 style="margin:0;font-size:13px;font-weight:600;">Tasks (<span class="task-count">0</span>/10)</h3><button class="close-panel" title="Close" style="background:none;border:none;color:#999;cursor:pointer;font-size:18px;padding:0;width:20px;height:20px;">Ã—</button></div><div class="task-list" style="padding:8px;font-size:12px;max-height:280px;overflow-y:auto;"></div><div style="padding:8px;border-top:1px solid #444;display:flex;gap:6px;"><button class="send-vscode" style="flex:1;padding:8px;background:#007acc;color:white;border:none;border-radius:4px;cursor:pointer;font-size:12px;">Send to VS Code</button><button class="copy-clip" style="flex:1;padding:8px;background:#444;color:white;border:none;border-radius:4px;cursor:pointer;font-size:12px;">Copy</button></div>';document.body.appendChild(o);const a=o.querySelector(".task-list"),s=o.querySelector(".task-count"),i=o.querySelector(".send-vscode"),c=o.querySelector(".copy-clip"),l=o.querySelector(".close-panel");function d(){const e=window.elementTasks.length;s.textContent=e;e>=10?(e.textContent="Limit (10) reached",t.style.background="#dc3545"):(t.textContent=`Click elements (${e}/10)`,t.style.background="#007acc")}function r(){a.innerHTML="";window.elementTasks.forEach((e,t)=>{const n=e.request||"No description";a.insertAdjacentHTML("beforeend",`<div style="margin-bottom:6px;">${t+1}. - [ ] ${n}<br><span style="color:#888;font-size:11px;">*Ref:* #element-${t+1}</span></div>`)})}l.onclick=()=>o.style.display="none";i.onclick=()=>{const e=window.elementTasks.map((e,t)=>`${t+1}. - [ ] ${e.request||"No description"}\n   *Ref:* #element-${t+1}`).join("\n\n"),t=`# TASK LIST\n\n${e}`;fetch("http://localhost:4123/grab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:location.href,html:t,tool:"ampcode",tasks:window.elementTasks,taskCount:window.elementTasks.length})}).then(()=>{navigator.clipboard.writeText(t);alert("Sent to VS Code & copied!");window.elementTasks=[];r();d();o.style.display="none"}).catch(()=>alert("VS Code not reachable"))};c.onclick=()=>{const e=window.elementTasks.map((e,t)=>`${t+1}. - [ ] ${e.request||"No description"}\n   *Ref:* #element-${t+1}`).join("\n\n");navigator.clipboard.writeText(`# TASK LIST\n\n${e}`).then(()=>alert("Copied to clipboard!"))};document.addEventListener("mouseover",e=>{if(!n||e.target.closest(".task-panel-ignore"))return;if(t)t.style.outline="";t=e.target;t.style.outline="2px solid #007acc"});document.addEventListener("click",function(e){if(!n||e.target.closest(".task-panel-ignore"))return;e.preventDefault();e.stopPropagation();const t=e.target;if(t.style)t.style.outline="";if(window.elementTasks.length>=10)return alert("Limit (10) reached");(function(e){e.style.outline="3px solid #007acc";e.style.boxShadow="0 0 0 3px rgba(0,122,204,0.3)";const t=e.cloneNode(!0);t.querySelectorAll("style, script").forEach(e=>e.remove());const n=t.outerHTML;(function(t){const o=document.createElement("div");o.className="task-panel-ignore";o.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:100003;";const a=document.createElement("div");a.className="task-panel-ignore";a.style.cssText="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#1e1e1e;color:#fff;padding:16px;border-radius:8px;width:340px;box-shadow:0 8px 32px rgba(0,0,0,0.5);font-family:system-ui;z-index:100004;font-size:12px;";a.innerHTML=`<div style="margin-bottom:10px;font-weight:600;">Add Task</div><pre style="background:#2d2d2d;padding:8px;border-radius:4px;max-height:100px;overflow:auto;font-size:10px;color:#a0a0a0;">${n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre><textarea placeholder="What to change?" style="width:100%;margin-top:8px;padding:6px;background:#2d2d2d;color:#fff;border:1px solid #007acc;border-radius:4px;font-size:12px;resize:vertical;min-height:40px;"></textarea><div style="margin-top:10px;display:flex;gap:6px;"><button class="add-btn" style="flex:1;padding:6px;background:#007acc;color:white;border:none;border-radius:4px;cursor:pointer;">Add</button><button class="cancel-btn" style="flex:1;padding:6px;background:#444;color:white;border:none;border-radius:4px;cursor:pointer;">Cancel</button></div>`;o.appendChild(a);document.body.appendChild(o);const s=a.querySelector("textarea"),i=a.querySelector(".add-btn"),c=a.querySelector(".cancel-btn");const l=()=>{e.style.outline="";e.style.boxShadow="";o.remove()};i.onclick=()=>{window.elementTasks.push({id:`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,html:n,request:s.value.trim(),completed:!1});r();d();o.style.display="block";l()};c.onclick=l;o.onclick=e=>{if(e.target===o)l()};setTimeout(()=>s.focus(),100)})(n)})(t)},true)})();